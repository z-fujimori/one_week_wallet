{% extends "base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'expenses/css/index.css' %}">
    <!-- icon links -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
{% endblock %}

{% block content %}
<div class="expenses-body">
    <div class="expend-form">
        <form action="{% url 'expenses:create_expense' %}" method="post">
            {% csrf_token %}
            <div class="form-header">
                <input class="input-date" type="date" value="{{ today }}" name="date"  required oninvalid="this.setCustomValidity('必須項目')"  oninput="this.setCustomValidity('')" >
            </div>
            <div class="form-body">
                <div class="input-main">
                    <div class="input-field">
                        <i class="fa-solid fa-tag input-icon"></i>
                        <input class="input-area" type="text" name="title" required oninvalid="this.setCustomValidity('必須項目')"  oninput="this.setCustomValidity('')">
                    </div>
                    <div class="input-field">
                        <i class="fa-solid fa-yen-sign input-icon"></i>
                        <input class="input-area" type="number" name="amount" required oninvalid="this.setCustomValidity('必須項目')"  oninput="this.setCustomValidity('')" >
                    </div>
                </div>
                <div class="form-button">
                    <div class="form-button-spacer"></div>
                    <button class="pen-button"><i class="fa-solid fa-pen"></i></button>
                </div>
            </div>
        </form>
    </div>

    <div class="week-calender">
        <table>
            <thead>
                <tr>
                    <th>日付</th>
                    <th>タイトル</th>
                    <th>金額</th>
                    <th>タグ</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                    <tr>
                        <td>{{ expense.date }}</td>
                        <td>{{ expense.title }}</td>
                        <td>{{ expense.amount }}円</td>
                        <td>{{ expense.tag.name }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">データがありません。</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <hr>
        <table>
            <thead>
                <tr>
                    <th>日付</th>
                    <th>金額</th>
                </tr>
            </thead>
            <tbody>
                {% for date, total in daily_amount_total %}
                    <tr>
                        <td>{{ date }}</td>
                        <td>{{ total }}円</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">データがありません。</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="control">
        <div class="control-return"></div>
        <div class="control-title"></div>
        <div class="control-improve"></div>
    </div>
</div>
{% endblock %}